## プログラムを書くための予備知識

さて、ここから「じゃあChrome開いてF12押して出てきたところに『1+1』って入力してみ」と運んでも良いのだが、プログラムを書くにあたって知っておいた方がいいものがある。
プログラムに関しての基本的な概念と、数学についての少しの知識である。数学の知識なんていらない、というのは最近の怪しい情報教材や意識高い系のキラキラプログラマーの流行り文句であるがどうせならスマートにプログラムを書きたいしある程度でも知っておけば幅出しも効くので知っておくと便利な事を最初に書いておく。今暫く辛坊されたい。

### 覚えておいた方がいい数学の概念

* 集合(set)
* 写像(map)
* 関数(function)

#### 集合(set)

「モノが集ったもの」である。なんだか身も蓋もない説明であるが、馴染みのある単語を出すなら「整数の集合」とか「素数の集合」とか「実数の集合」とかがある。もちろん数以外のモノが入る可能性もあるし、もっと小さい集合もある。 $\lbrace 0、 1\rbrace$ とか、 $\lbrace 太陽\rbrace$  とか。
とにかく一定の条件だったり特定のモノだったりが集ったもの、それが「集合」である。

#### 写像(map)

「ある集合の要素からある集合へのただひとつへの要素を対応づけるもの」である。同じ集合でもいいし、違う集合でもいい。
例えば「ある実数 $x$ を二乗する」は「実数(の集合)から実数(の集合)への写像」であり、例えば「このテストで30点未満の人は『赤点』、30点以上の人は『合格』とする」というのは「テストの点数(の集合)から合格状況(の集合)への写像」である。

当然「テストの点数」に、例えば「イナゴの佃煮」を入れてはいけない。「イナゴの佃煮」は「テストの点数の集合」に入っておらず、当然イナゴの佃煮に対応する合否は定義されていないからだ。集合の外にあるものに対しての対応は無い。

ここで重要なのは「写像をとった先は一つに定まる」という事である。「この点数は赤点でもあるし合格でもある」という状態があってはいけない。

後述する関数は写像の一種である。

#### 関数(function)

関数という言葉自体は数学で聞いた事があると思うし、 $ f(x)=3x^{2} $ ぐらいの表記は見たことがあると思う。だが先述した「集合」と「写像」の概念があれば、これがただの計算式に留まらないという事が垣間見える。

関数とは写像の具体的な定義である。多少の語弊はあるがまあ許してほしい。とりあえず陽関数の事だけに絞って話をする。つまり「この何かをこうやって新しい何かを作る」というその具体的な内容を定義しているのが「関数」である。適当に例を書くなら $ f(x, y) = (2x, 3y) (x,y \in  \mathbb{R})$ は実数の集合と実数の集合から実数ベクトルへの写像( $ f:\mathbb{R} \times \mathbb{R} \rightarrow \mathbb{R}^2 $ )である。

もっと単純な話をするなら日常よく使う四則演算の類も立派な関数である。つまるところ実数(じゃない時もあるけど)と実数から実数への写像である。いちいち $ p(1,2) $ とか書くのがめんどくさいから $ 1 + 2 $ という書き方が発明された。こういうのを「演算子」という。

### 覚えておいた方がいいコンピュータの概念

ここからプログラムについての話をやっと始める事ができる。プログラムの書きかたを少しずつ説明しながら以下の事について述べていく。興味があればChromeを開いてF12を押せば「コンソール」というものが出てくる。例に挙げたプログラムを実行することができるので、試してみるのもいいかもしれない。

* 変数 (variant)
* 関数(function/数学とは違う概念なので注意)
* 演算子 (operator)
* 型 (type)
* 配列(array)
* 連想配列(なんか色々な名前で呼ばれている)

#### 変数 (variant)

「箱」という説明がよくされている。筆者はこの説明があまり好きではないのだがこれ以上に適当な説明が思い浮ばない。ハードウェアアーキテクチャをわかってる人なら「メモリアドレスに紐付いたエイリアス」で通じるのだが、多分わからないと思う。忘れてほしい。

```javaScript
a = 10
```

こう書くと、「a」という変数に10が「入る」。数学で「 `=` 」は「等号」であるが、プログラムにおいては「代入」である。当然これは使い回せる。

```javaScript
a = 10
b = a * 2
```

プログラムは基本的に上に書いた物から解釈されていく。こう書けば「b」という変数に20が入る。ちなみに「*」は掛け算の記号だ。加減乗除は `+-*/` で表現する事ができる。あまり直感に反する物ではないだろう。
とりあえずここではこのぐらいの説明に留めておく。

#### 関数 (function)

さっきは数学においての関数の話をしたが、これがプログラムになってくると話が変ってくる。
というのも元々は「サブルーチン」と呼ばれていたものが、利便性のため引数という概念を導入した時に数学の関数に似てるから「関数」と呼ばれ始めたからである。

プログラムにおいて「関数」というものは単に「使い回しをするプログラムをくくった物」である。
以下のような感じだ。

```javaScript
f = function(x, y){
  z = x + y
  return z
}

a = f(3, 4)
```

 `function` というのは関数を定義するための接頭語で、そのあとに「引数」となるべき変数を書き、その後実行したい文を書く。最後に `return` として「返却」したい値を書く。

「引数」とは関数に渡す値の事である。その関数の実行された結果として返却される値を「戻り値」と呼ぶ。

`f(3,4)` としているところが実際にその関数を呼び出しているところで、 `x` に3、`y` に4が入って、最終的に `a` には7が入る。

こういう使いかたをしている分には数学の関数と同じような使いかたができる。では次の例はどうだろうか。

```javaScript
console.log("Hello world!")
```

これは「画面(正確には「コンソール」と呼ばれる物)に文字列を表示する」関数だ。返却される値はなにもない。それどころか画面が「汚れる」。これを実行した回数だけ画面には指定した文字列が次々と表示される。

もっとわかりやすい例を示す。

```javaScript
a = 1

console.log(a) // 1 と表示される

incrimentA = function(){
  a = a + 1
  return
}

incrimentA()

console.log(a) // 2 と表示される
```

この関数は引数も持たない。返却するべき値も無い。
ただし実行すると関数の「外」にある変数 `a` に値を入れる。なので関係無い筈の `a` の値が変ってしまう。

こういうふうに関数の外部に影響を及ぼしてしまう関数を「 *副作用を持った* 」関数と呼び、関数の外部にある情報を利用する関数を「 *状態を持った* 」関数と呼ぶ。実際にプログラムを書く上で必要な事なのではあるが、極力副作用や状態を持つ関数というのは作るのを避けた方が無難である。

#### 演算子(operator)

先程シレっと「`+`」とか「`*`」とか出したが、これらは「演算子」と呼ばれる物である。
要するに「関数を省略して記号や文字列で書けるようにしたもの」である。
`a+b` と書いたらその裏では `a` と `b` を加算する関数が走っているのである。
プログラム言語には各々様々な演算子が登場するが、出てきた時に説明する。

#### 型(type)

さて、変数に入るのは数字だけではない。

```javaScript
str = 'hello world'
```

シングルクォーテーション(`'`)は文字列を記述する時に使う記号だ。こう書けばちゃんと`str`という変数に「文字列」が変数に入る。

```javaScript
str = 'hello world'
console.log(str)
```

こう書けばちゃんと画面に「hello world」と表示される。問題の無い動作だ。
では次の場合はどうだろう。

```javaScript
str = 'hello world'
x = str * 2
```

文字列を掛け算する、など聞いた事が無いだろう。当然このプログラムはエラーを吐く。
このようにプログラムを書く時には「その変数にどんなものが入っているか」を常に気にしなければいけない。
その「どんなもの」を示すのが「型」である。
JavaScriptには以下の型が存在する。

* 数値
  * 数値である。他の言語では「整数」とか「浮動小数」とかが区別されるがJavaScriptにおいては区別されない。だからこそ注意が必要な場面もある。
* 文字列
  * ちなみに他の言語には大抵「文字」があるがJavaScriptには存在しない。文字と数字の関係性は後で説明する。
* 真偽値
  * `true` 、`false` のどちらかをとる値である。つかいかたは追い追い説明する。
* 配列
  * 後述する
* 関数
  * JavaScriptでは関数も立派な型である。関数も変数に代入する事ができる。なんだかややこしい話に思えるが慣れればとても便利である。
* オブジェクト
  * 連想配列
* `undefined`
  * 「定義されていない」事を示す型であり`undefined`という値しか持たない。

実は他にもあるが覚えておけばいいのはこのぐらいである。

さて、少し話を戻す。「関数は写像である」と言ったのを覚えているだろうか。そして「写像とは集合を集合に写すものである」と言ったのを覚えているだろうか。つまるところ「型」とは「集合」を示しているのである。「このテストで30点未満の人は『赤点』、30点以上の人は『合格』とする」と言って、「テストの点数」に「イナゴの佃煮」を入れてはいけない。同じように「`*`」という演算子(関数)に文字列を渡してはいけない。掛け算は数値には定義されているが文字列には定義されていない。

このようにプログラムを書く上で「型」というのは常に意識しなければならず、それは「関数」と密接に結びついている。

#### 配列(array)

値が「並んだ」物である。「値」というのは変数に入るもの全てである。つまり、なんでもいい。

```javascript
arr = [1, 2, 5, 8]
a = arr[2] // a に 5 が入る
```

このように角カッコでくくってカンマで区切れば配列を作る事ができる。取り出す時は番号で取り出す。先頭は「0」なので注意する事。

先程「なんでもいい」と言った。中身は数値じゃなくてもいい、なんならバラバラな型を持っていてもいい。

```javascript
arr = [1, 'hello!', true, [1, 3, 6] ]
a = arr[1] // a に 'hello!' が入る
```

が、このような使いかたはするべきではないし、実際JavaScript以外の殆どの言語では中に入る値の「型」は統一されていなければいけない。配列は値をまとめて取り扱いたい時に用いられる物であるし、例えば「配列の中の全ての値に対してXXをする」という使いかたをするケースも多い。
配列の中には同じ型を持った値を入れる事。異なった性質の物を扱いたい時は後述する「連想配列」を用いる事。

#### 連想配列

同じ「配列」という名前が使われているので少しややこしいが、JavaScriptにおいては「オブジェクト」と呼ばれ「メンバ」を持った値である。例えばこんな感じである。

```javascript
obj = {
  value: 10,
  message: 'hello!'
}

console.log(obj.value) // 10と表示される
console.log(obj.message) // hello! と表示される

obj.value = 100

console.log(obj.value) // 100と表示される
```

中括弧(`{}`)で始め、その中に「名前: 値」をカンマで区切って並べる。
この名前のついた中身の事を「メンバ」と呼ぶ。メンバはどんな値を持っていても良い。真偽値でも関数でも、オブジェクトを入れ子にしても良い。

また参照する時にはドット演算子を使って呼び出したり、また直接値を代入したりできる。

ところで何の説明も無しに `console.log` という関数を使っていたが、これも見ての通り `console` というオブジェクトに入った `log` という関数を呼び出している。 `console` というオブジェクトの中には文字通りコンソールに関わる様々な機能がメンバとして登録されている。
